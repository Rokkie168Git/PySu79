<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Add Product • Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 4.6 CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
    crossorigin="anonymous"
  >

  <style>
    body { background:#0f172a; }
    .navbar { background:#111827; }
    .navbar-brand, .nav-link, .navbar-text { color:#e5e7eb !important; }
    .card { border:0; border-radius:1rem; }
    .card-header { background:transparent; border:0; padding-bottom:0; }
    .card-body { padding-top:0; }
    .shadow-soft { box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    .form-control, .custom-file-label { border-radius:.6rem; }
    .btn-primary { border-radius:.6rem; }
    .text-muted small { opacity:.9; }
  </style>
</head>
<body>

  <!-- Top bar -->
  <nav class="navbar navbar-expand-md mb-5">
    <a class="navbar-brand font-weight-bold" href="#">Inventory Admin</a>
    <span class="navbar-text ml-auto">Add Product</span>
  </nav>

  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-7">
        <div class="card shadow-soft">
          <div class="card-header">
            <h4 class="mb-3">Create a new product</h4>
            <p class="text-muted mb-0"><small>Fill in the details below and click <strong>Save</strong>.</small></p>
          </div>

          <div class="card-body">
            {% if errors %}
              <div class="alert alert-danger" role="alert">
                <h6 class="mb-2">Please fix the following:</h6>
                <ul class="mb-0">
                  {% for e in errors %}<li>{{ e }}</li>{% endfor %}
                </ul>
              </div>
            {% endif %}

            <form class="needs-validation" novalidate
                  action="{{ url_for('add') }}" method="POST" enctype="multipart/form-data">

              <div class="form-group">
                <label for="title">Title <span class="text-danger">*</span></label>
                <input id="title" name="title" type="text"
                       class="form-control" value="{{ data.title }}" required>
                <div class="invalid-feedback">Product title is required.</div>
              </div>

              <div class="form-group">
                <label for="category">Category <span class="text-danger">*</span></label>
                <input id="category" name="category" type="text"
                       class="form-control" value="{{ data.category }}" required>
                <div class="invalid-feedback">Category is required.</div>
              </div>

              <div class="form-group">
                <label for="price">Price <span class="text-danger">*</span></label>
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">$</span>
                  </div>
                  <input id="price" name="price" type="number" step="0.01" min="0"
                         class="form-control" value="{{ data.price }}" required>
                </div>
                <small class="form-text text-muted">Enter a non-negative amount.</small>
                <div class="invalid-feedback">Please provide a valid price (0 or greater).</div>
              </div>

              <div class="form-group">
                <label for="image">Image <span class="text-danger">*</span></label>
                <div class="custom-file">
                  <input type="file" class="custom-file-input" id="image" name="image" accept="image/*" required>
                  <label class="custom-file-label" for="image">Choose image...</label>
                  <div class="invalid-feedback">Please select an image file.</div>
                </div>
              </div>

              <div class="d-flex align-items-center">
                <button type="submit" class="btn btn-primary px-4">Save</button>
                <a href="{{ url_for('load') }}" class="btn btn-link ml-2">View all products</a>
              </div>
            </form>
          </div>

        </div>
        <p class="text-center text-muted mt-3"><small>© {{ 2025|default(2025) }} Your Company</small></p>
      </div>
    </div>
  </div>

  <!-- Bootstrap 4.6 JS + deps -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
          integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
          crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
          crossorigin="anonymous"></script>

  <!-- Bootstrap custom-file label + client-side validation -->
  <script>
    // Show chosen filename on custom file input
    $('.custom-file-input').on('change', function() {
      var fileName = this.files && this.files[0] ? this.files[0].name : 'Choose image...';
      $(this).next('.custom-file-label').text(fileName);
    });

    // Bootstrap validation
    (function() {
      'use strict';
      var forms = document.getElementsByClassName('needs-validation');
      Array.prototype.slice.call(forms).forEach(function(form) {
        form.addEventListener('submit', function(event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();
  </script>
</body>
</html>
