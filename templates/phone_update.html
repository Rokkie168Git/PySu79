{% extends 'base_admin.html' %}
{% block title %}Edit Phone â€¢ Admin{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h4 class="mb-0">Edit Phone #{{ phone.id }}</h4>
    <small class="text-muted">Update product details</small>
  </div>
  <a href="{{ url_for('phone_list') }}" class="btn btn-outline-secondary"><i class="fas fa-list-ul mr-1"></i> All Phones</a>
</div>

{% if errors %}
  <div class="alert alert-danger"><ul class="mb-0">{% for e in errors %}<li>{{ e }}</li>{% endfor %}</ul></div>
{% endif %}

<form action="{{ url_for('phone_update', phone_id=phone.id) }}" method="POST" enctype="multipart/form-data">
  <div class="card mb-4">
    <div class="card-body">
      <div class="form-row">
        <div class="form-group col-md-4"><label>Name *</label><input name="name" class="form-control" value="{{ phone.name }}" required></div>
        <div class="form-group col-md-4"><label>Brand *</label><input name="brand" class="form-control" value="{{ phone.brand }}" required></div>
        <div class="form-group col-md-4"><label>Model *</label><input name="model" class="form-control" value="{{ phone.model }}" required></div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-3"><label>Price *</label><input type="number" step="0.01" min="0" name="price" class="form-control" value="{{ phone.price }}" required></div>
        <div class="form-group col-md-3"><label>Quantity *</label><input type="number" min="0" name="quantity" class="form-control" value="{{ phone.quantity }}" required></div>
        <div class="form-group col-md-3"><label>Warranty (months) *</label><input type="number" min="0" name="warranty_mo" class="form-control" value="{{ phone.warranty_mo }}" required></div>
        <div class="form-group col-md-3"><label>Availability *</label>
          <select name="available" class="form-control" required>
            <option value="in_stock"  {{ 'selected' if phone.available=='in_stock'  }}>In stock</option>
            <option value="preorder"  {{ 'selected' if phone.available=='preorder'  }}>Pre-order</option>
            <option value="out_of_stock" {{ 'selected' if phone.available=='out_of_stock' }}>Out of stock</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-3"><label>OS *</label><input name="os" class="form-control" value="{{ phone.os }}" required></div>
        <div class="form-group col-md-3"><label>CPU *</label><input name="cpu" class="form-control" value="{{ phone.cpu }}" required></div>
        <div class="form-group col-md-3"><label>RAM (GB) *</label><input type="number" min="1" name="ram_gb" class="form-control" value="{{ phone.ram_gb }}" required></div>
        <div class="form-group col-md-3"><label>Storage (GB) *</label><input type="number" min="16" name="storage_gb" class="form-control" value="{{ phone.storage_gb }}" required></div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-4"><label>Display *</label><input name="display" class="form-control" value="{{ phone.display }}" required></div>
        <div class="form-group col-md-4"><label>Cameras *</label><input name="cameras" class="form-control" value="{{ phone.cameras }}" required></div>
        <div class="form-group col-md-2"><label>Battery (mAh) *</label><input type="number" min="1000" name="battery_mah" class="form-control" value="{{ phone.battery_mah }}" required></div>
        <div class="form-group col-md-2"><label>Color *</label><input name="color" class="form-control" value="{{ phone.color }}" required></div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6"><label>Network *</label><input name="network" class="form-control" value="{{ phone.network }}" required></div>
        <div class="form-group col-md-6"><label>Type *</label>
          <select name="type" class="form-control" required>
            <option value="smartphone" {{ 'selected' if phone.type=='smartphone' }}>Smartphone</option>
            <option value="feature"    {{ 'selected' if phone.type=='feature'    }}>Feature phone</option>
            <option value="tablet"     {{ 'selected' if phone.type=='tablet'     }}>Tablet</option>
          </select>
        </div>
      </div>
      <div class="form-group"><label>Highlights *</label><textarea name="highlights" rows="2" class="form-control" required>{{ phone.highlights }}</textarea></div>
      <div class="form-group"><label>Description *</label><textarea name="description" rows="3" class="form-control" required>{{ phone.description }}</textarea></div>
      <div class="form-row">
        <div class="form-group col-md-4"><label>Main image</label><div class="mb-2"><img src="{{ url_for('static', filename='img/' ~ phone.main_image) }}" class="img-thumbnail" style="height:100px;object-fit:contain"></div><input type="file" name="main_image" class="form-control-file" accept="image/*"><small class="text-muted">Leave empty to keep current.</small></div>
        <div class="form-group col-md-4"><label>Side image</label><div class="mb-2"><img src="{{ url_for('static', filename='img/' ~ phone.side_image) }}" class="img-thumbnail" style="height:100px;object-fit:contain"></div><input type="file" name="side_image" class="form-control-file" accept="image/*"></div>
        <div class="form-group col-md-4"><label>Sub image</label><div class="mb-2"><img src="{{ url_for('static', filename='img/' ~ phone.sub_image) }}" class="img-thumbnail" style="height:100px;object-fit:contain"></div><input type="file" name="sub_image" class="form-control-file" accept="image/*"></div>
      </div>
      <div class="d-flex"><button class="btn btn-primary mr-2">Save Changes</button><a href="{{ url_for('phone_list') }}" class="btn btn-secondary">Cancel</a></div>
    </div>
  </div>
</form>
{% endblock %}
